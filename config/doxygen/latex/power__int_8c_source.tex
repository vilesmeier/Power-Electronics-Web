\doxysection{power\+\_\+int.\+c}
\hypertarget{power__int_8c_source}{}\label{power__int_8c_source}\index{D:/Codes/NUEDC/NUEDC-\/Core/Code/Control\_Driver/power\_int/power\_int.c@{D:/Codes/NUEDC/NUEDC-\/Core/Code/Control\_Driver/power\_int/power\_int.c}}
\mbox{\hyperlink{power__int_8c}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00001}00001\ }
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00008}00008\ }
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00009}00009\ \textcolor{comment}{//\ Flash\ 启动支持,\ 将函数搬运至RAM}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00010}00010\ \textcolor{preprocessor}{\#pragma\ CODE\_SECTION(POWER\_1ph\_Init,\ "{}.TI.ramfunc"{});}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00011}00011\ \textcolor{preprocessor}{\#pragma\ CODE\_SECTION(POWER\_1ph\_Set,\ "{}.TI.ramfunc"{});}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00012}00012\ \textcolor{preprocessor}{\#pragma\ CODE\_SECTION(POWER\_1ph\_Run,\ "{}.TI.ramfunc"{});}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00013}00013\ \textcolor{preprocessor}{\#pragma\ CODE\_SECTION(POWER\_RMS\_1ph\_Run,\ "{}.TI.ramfunc"{});}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00014}00014\ \textcolor{preprocessor}{\#pragma\ CODE\_SECTION(POWER\_3ph\_Init,\ "{}.TI.ramfunc"{});}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00015}00015\ \textcolor{preprocessor}{\#pragma\ CODE\_SECTION(POWER\_3ph\_Set,\ "{}.TI.ramfunc"{});}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00016}00016\ \textcolor{preprocessor}{\#pragma\ CODE\_SECTION(POWER\_3ph\_Set\_Voltage,\ "{}.TI.ramfunc"{});}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00017}00017\ \textcolor{preprocessor}{\#pragma\ CODE\_SECTION(POWER\_3ph\_Set\_Current,\ "{}.TI.ramfunc"{});}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00018}00018\ \textcolor{preprocessor}{\#pragma\ CODE\_SECTION(POWER\_3ph\_Run,\ "{}.TI.ramfunc"{});}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00019}00019\ \textcolor{preprocessor}{\#pragma\ CODE\_SECTION(POWER\_3ph\_RMS\_Run,\ "{}.TI.ramfunc"{});}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00020}00020\ }
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00021}00021\ \textcolor{preprocessor}{\#include\ "{}power.h"{}}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00022}00022\ }
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00023}\mbox{\hyperlink{group___c_t_r_l___p_o_w_e_r___i_n_t_ga4a48db564c37e65cced4cf5e14edc03e}{00023}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{group___c_t_r_l___p_o_w_e_r___i_n_t_ga4a48db564c37e65cced4cf5e14edc03e}{POWER\_1ph\_Init}}(\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h}{POWER\_1PH}}\ *v)}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00024}00024\ \{}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00025}00025\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a9dc240cb4a37d694e84858137e88607c}{vRms}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00026}00026\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a71e44d291ff1ddbd5865cfa528640e55}{vAvg}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00027}00027\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_ad8877e201e5ddfd41743b80877cbc2cc}{vEma}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00028}00028\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_ac77d30798cef8a5255475e0e5fb3174f}{acFreq}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00029}00029\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a57d13453c7fdfaddf54559c647461bcb}{iRms}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00030}00030\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a2f510172a81d01d83ff3569e4303fda4}{pRms}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00031}00031\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a138a3abcacce684ed91e62f1f60b560e}{vaRms}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00032}00032\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a66b11ce1610621a8684d82ed5f335108}{varRms}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00033}00033\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_acfe31de512834b88c1c7d494b2afabec}{powerFactor}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00034}00034\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_af20b6a1ded87748f1b546c4d353eabd1}{zcd}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00035}00035\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a969969aaf5b14f17e812a505cb7a49a0}{vSum}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00036}00036\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a75095d14bfb80f8d8b44e959a3025da7}{vSqrSum}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00037}00037\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a7a89cb87ad927a6cb8fe3188a8509543}{iSqrSum}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00038}00038\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a774b8fa8d3726131a901e0c869140376}{pSum}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00039}00039\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a452cac3f1997f56838fe01e5b038c76c}{vNorm}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00040}00040\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a2772bf371f9139ca7d4671ef5cf016c1}{iNorm}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00041}00041\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_ad42cce783e2813461b8ea3a1b8063caf}{prevSign}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00042}00042\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a0e5efa0754e70939f5f89b432b9fcfdc}{currSign}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00043}00043\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_ace46e91fac36ee337218f2ed4a9c6bd3}{nSamples}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00044}00044\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a5777ab6a79285dd5d96a52bae4e8b8eb}{nSamplesMin}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00045}00045\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a996180447483e16470055b6b041fde4b}{nSamplesMax}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00046}00046\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a6e1ee018eaa4c5a9af4ac89dec261d29}{inverse\_nSamples}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00047}00047\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a7431c5ab045079613f280b19009565da}{sqrt\_inverse\_nSamples}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00048}00048\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a820c9eedf560eed9005d98d105d78858}{jitterCount}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00049}00049\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_ac46986b7640d7a44b18f52db889c7b62}{emaFilterMultiplier}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00050}00050\ }
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00051}00051\ \}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00052}00052\ }
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00053}\mbox{\hyperlink{group___c_t_r_l___p_o_w_e_r___i_n_t_ga9d547552a77fb8cbc20566a720e36db3}{00053}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{group___c_t_r_l___p_o_w_e_r___i_n_t_ga9d547552a77fb8cbc20566a720e36db3}{POWER\_1ph\_Set}}(\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h}{POWER\_1PH}}\ *v,\ float32\_t\ isrFrequency,\ float32\_t\ threshold,\ float32\_t\ gridMaxFreq,\ float32\_t\ gridMinFreq)}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00054}00054\ \{}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00055}00055\ \ \ \ \ \textcolor{keywordflow}{if}(gridMaxFreq\ <\ gridMinFreq)}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00056}00056\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00057}00057\ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a996180447483e16470055b6b041fde4b}{nSamplesMax}}=isrFrequency/gridMaxFreq;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00058}00058\ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a5777ab6a79285dd5d96a52bae4e8b8eb}{nSamplesMin}}=isrFrequency/gridMinFreq;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00059}00059\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00060}00060\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00061}00061\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00062}00062\ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a996180447483e16470055b6b041fde4b}{nSamplesMax}}=isrFrequency/gridMinFreq;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00063}00063\ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a5777ab6a79285dd5d96a52bae4e8b8eb}{nSamplesMin}}=isrFrequency/gridMaxFreq;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00064}00064\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00065}00065\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a3948bcdff5ab51f40654a7d3047c92f8}{sampleFreq}}\ =\ (float32\_t)(isrFrequency);}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00066}00066\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a47901b99cb34a03122d5a331a5989b6c}{threshold}}\ =\ (float32\_t)(threshold);}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00067}00067\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_ac46986b7640d7a44b18f52db889c7b62}{emaFilterMultiplier}}=2.0f/isrFrequency;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00068}00068\ \}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00069}00069\ }
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00070}\mbox{\hyperlink{group___c_t_r_l___p_o_w_e_r___i_n_t_ga27cd4e0d8ea6c7f323b7b3dc7f6c9085}{00070}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{group___c_t_r_l___p_o_w_e_r___i_n_t_ga27cd4e0d8ea6c7f323b7b3dc7f6c9085}{POWER\_1ph\_Run}}(\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h}{POWER\_1PH}}\ *v,\ float32\_t\ vol,\ float32\_t\ cur)}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00071}00071\ \{}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00072}00072\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_aa36e4f18055590d23149ac0824aaee75}{v}}\ =\ vol;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00073}00073\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a8ce5ddb266a9abdf0a69e0d1de6fafb7}{i}}\ =\ cur;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00074}00074\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a452cac3f1997f56838fe01e5b038c76c}{vNorm}}\ =\ fabsf(v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_aa36e4f18055590d23149ac0824aaee75}{v}});}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00075}00075\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a2772bf371f9139ca7d4671ef5cf016c1}{iNorm}}\ =\ fabsf(v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a8ce5ddb266a9abdf0a69e0d1de6fafb7}{i}});}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00076}00076\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a0e5efa0754e70939f5f89b432b9fcfdc}{currSign}}\ =\ (\ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_aa36e4f18055590d23149ac0824aaee75}{v}}\ >\ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a47901b99cb34a03122d5a331a5989b6c}{threshold}})\ ?\ 1\ :\ 0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00077}00077\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_ace46e91fac36ee337218f2ed4a9c6bd3}{nSamples}}++;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00078}00078\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a969969aaf5b14f17e812a505cb7a49a0}{vSum}}\ =\ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a969969aaf5b14f17e812a505cb7a49a0}{vSum}}+v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a452cac3f1997f56838fe01e5b038c76c}{vNorm}};}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00079}00079\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a75095d14bfb80f8d8b44e959a3025da7}{vSqrSum}}\ =\ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a75095d14bfb80f8d8b44e959a3025da7}{vSqrSum}}+(v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a452cac3f1997f56838fe01e5b038c76c}{vNorm}}*v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a452cac3f1997f56838fe01e5b038c76c}{vNorm}});}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00080}00080\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_ad8877e201e5ddfd41743b80877cbc2cc}{vEma}}\ =\ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_ad8877e201e5ddfd41743b80877cbc2cc}{vEma}}+(v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_ac46986b7640d7a44b18f52db889c7b62}{emaFilterMultiplier}}*(v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a452cac3f1997f56838fe01e5b038c76c}{vNorm}}\ -\/\ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_ad8877e201e5ddfd41743b80877cbc2cc}{vEma}}));}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00081}00081\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a7a89cb87ad927a6cb8fe3188a8509543}{iSqrSum}}\ =\ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a7a89cb87ad927a6cb8fe3188a8509543}{iSqrSum}}+(v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a2772bf371f9139ca7d4671ef5cf016c1}{iNorm}}*v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a2772bf371f9139ca7d4671ef5cf016c1}{iNorm}});}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00082}00082\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a774b8fa8d3726131a901e0c869140376}{pSum}}\ =\ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a774b8fa8d3726131a901e0c869140376}{pSum}}+(v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a8ce5ddb266a9abdf0a69e0d1de6fafb7}{i}}*v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_aa36e4f18055590d23149ac0824aaee75}{v}});}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00083}00083\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_af20b6a1ded87748f1b546c4d353eabd1}{zcd}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00084}00084\ }
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00085}00085\ \ \ \ \ \textcolor{comment}{//\ when\ positive\ zero\ pass\ is\ detected,\ indecating\ a\ full\ sine\ wave\ period}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00086}00086\ \ \ \ \ \textcolor{keywordflow}{if}((v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_ad42cce783e2813461b8ea3a1b8063caf}{prevSign}}\ !=\ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a0e5efa0754e70939f5f89b432b9fcfdc}{currSign}})\ \&\&\ (v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a0e5efa0754e70939f5f89b432b9fcfdc}{currSign}}\ ==\ 1))}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00087}00087\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00088}00088\ \ \ \ \ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00089}00089\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ check\ if\ the\ nSamples\ are\ in\ the\ ball\ park\ of\ a\ real\ frequency}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00090}00090\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ that\ can\ be\ on\ the\ grid,\ this\ is\ done\ by\ comparing\ the\ nSamples}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00091}00091\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ with\ the\ max\ value\ and\ min\ value\ it\ can\ be\ for\ the\ }}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00092}00092\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ AC\ Grid\ Connection\ these\ Max\ and\ Min\ are\ initialized\ by\ the\ }}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00093}00093\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ user\ in\ the\ code}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00094}00094\ \ \ \ \ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00095}00095\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a5777ab6a79285dd5d96a52bae4e8b8eb}{nSamplesMin}}\ <\ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_ace46e91fac36ee337218f2ed4a9c6bd3}{nSamples}}\ )}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00096}00096\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00097}00097\ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_af20b6a1ded87748f1b546c4d353eabd1}{zcd}}=1;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00098}00098\ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a6e1ee018eaa4c5a9af4ac89dec261d29}{inverse\_nSamples}}\ =\ (1.0f)/(v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_ace46e91fac36ee337218f2ed4a9c6bd3}{nSamples}});}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00099}00099\ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a7431c5ab045079613f280b19009565da}{sqrt\_inverse\_nSamples}}\ =\ sqrtf(v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a6e1ee018eaa4c5a9af4ac89dec261d29}{inverse\_nSamples}});}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00100}00100\ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a71e44d291ff1ddbd5865cfa528640e55}{vAvg}}\ \ =\ (v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a969969aaf5b14f17e812a505cb7a49a0}{vSum}}*v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a6e1ee018eaa4c5a9af4ac89dec261d29}{inverse\_nSamples}});}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00101}00101\ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a9dc240cb4a37d694e84858137e88607c}{vRms}}\ \ =\ sqrtf(v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a75095d14bfb80f8d8b44e959a3025da7}{vSqrSum}})*v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a7431c5ab045079613f280b19009565da}{sqrt\_inverse\_nSamples}};}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00102}00102\ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a57d13453c7fdfaddf54559c647461bcb}{iRms}}\ \ =\ sqrtf(v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a7a89cb87ad927a6cb8fe3188a8509543}{iSqrSum}})*v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a7431c5ab045079613f280b19009565da}{sqrt\_inverse\_nSamples}};}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00103}00103\ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a2f510172a81d01d83ff3569e4303fda4}{pRms}}\ \ =\ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a774b8fa8d3726131a901e0c869140376}{pSum}}*v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a6e1ee018eaa4c5a9af4ac89dec261d29}{inverse\_nSamples}};}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00104}00104\ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a138a3abcacce684ed91e62f1f60b560e}{vaRms}}\ =\ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a9dc240cb4a37d694e84858137e88607c}{vRms}}*v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a57d13453c7fdfaddf54559c647461bcb}{iRms}};}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00105}00105\ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a66b11ce1610621a8684d82ed5f335108}{varRms}}\ =\ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a138a3abcacce684ed91e62f1f60b560e}{vaRms}}\ *\ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a138a3abcacce684ed91e62f1f60b560e}{vaRms}}\ -\/\ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a2f510172a81d01d83ff3569e4303fda4}{pRms}}\ *\ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a2f510172a81d01d83ff3569e4303fda4}{pRms}};}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00106}00106\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a66b11ce1610621a8684d82ed5f335108}{varRms}}\ <=\ 0\ )}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00107}00107\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00108}00108\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a66b11ce1610621a8684d82ed5f335108}{varRms}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00109}00109\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00110}00110\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00111}00111\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00112}00112\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a66b11ce1610621a8684d82ed5f335108}{varRms}}\ =\ sqrtf(v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a66b11ce1610621a8684d82ed5f335108}{varRms}});}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00113}00113\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00114}00114\ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_ac77d30798cef8a5255475e0e5fb3174f}{acFreq}}\ =\ (v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a3948bcdff5ab51f40654a7d3047c92f8}{sampleFreq}}*v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a6e1ee018eaa4c5a9af4ac89dec261d29}{inverse\_nSamples}});}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00115}00115\ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_acfe31de512834b88c1c7d494b2afabec}{powerFactor}}=v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a2f510172a81d01d83ff3569e4303fda4}{pRms}}/v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a138a3abcacce684ed91e62f1f60b560e}{vaRms}};}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00116}00116\ }
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00117}00117\ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a820c9eedf560eed9005d98d105d78858}{jitterCount}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00118}00118\ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_ace46e91fac36ee337218f2ed4a9c6bd3}{nSamples}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00119}00119\ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a969969aaf5b14f17e812a505cb7a49a0}{vSum}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00120}00120\ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a75095d14bfb80f8d8b44e959a3025da7}{vSqrSum}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00121}00121\ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a7a89cb87ad927a6cb8fe3188a8509543}{iSqrSum}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00122}00122\ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a774b8fa8d3726131a901e0c869140376}{pSum}}\ =0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00123}00123\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00124}00124\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00125}00125\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00126}00126\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00127}00127\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ otherwise\ it\ may\ be\ jitter\ ignore\ this\ reading}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00128}00128\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ but\ count\ the\ number\ of\ jitters\ you\ are\ getting}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00129}00129\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ but\ do\ not\ count\ to\ infinity\ as\ then\ when\ the\ grid\ comes\ back}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00130}00130\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ it\ will\ take\ too\ much\ time\ to\ wind\ down\ the\ jitter\ count}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00131}00131\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00132}00132\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a820c9eedf560eed9005d98d105d78858}{jitterCount}}<30)}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00133}00133\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00134}00134\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a820c9eedf560eed9005d98d105d78858}{jitterCount}}++;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00135}00135\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00136}00136\ \ \ \ \ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_ace46e91fac36ee337218f2ed4a9c6bd3}{nSamples}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00137}00137\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00138}00138\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00139}00139\ }
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00140}00140\ \ \ \ \ \textcolor{keywordflow}{if}(v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_ace46e91fac36ee337218f2ed4a9c6bd3}{nSamples}}>v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a996180447483e16470055b6b041fde4b}{nSamplesMax}}\ ||\ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a820c9eedf560eed9005d98d105d78858}{jitterCount}}>20)}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00141}00141\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00142}00142\ \ \ \ \ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00143}00143\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ most\ certainly\ the\ AC\ voltage\ is\ not\ present}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00144}00144\ \ \ \ \ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00145}00145\ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a9dc240cb4a37d694e84858137e88607c}{vRms}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00146}00146\ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a71e44d291ff1ddbd5865cfa528640e55}{vAvg}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00147}00147\ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_ad8877e201e5ddfd41743b80877cbc2cc}{vEma}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00148}00148\ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_ac77d30798cef8a5255475e0e5fb3174f}{acFreq}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00149}00149\ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a57d13453c7fdfaddf54559c647461bcb}{iRms}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00150}00150\ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a2f510172a81d01d83ff3569e4303fda4}{pRms}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00151}00151\ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a138a3abcacce684ed91e62f1f60b560e}{vaRms}}\ =0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00152}00152\ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_acfe31de512834b88c1c7d494b2afabec}{powerFactor}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00153}00153\ }
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00154}00154\ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_af20b6a1ded87748f1b546c4d353eabd1}{zcd}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00155}00155\ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a969969aaf5b14f17e812a505cb7a49a0}{vSum}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00156}00156\ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a75095d14bfb80f8d8b44e959a3025da7}{vSqrSum}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00157}00157\ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a7a89cb87ad927a6cb8fe3188a8509543}{iSqrSum}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00158}00158\ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a774b8fa8d3726131a901e0c869140376}{pSum}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00159}00159\ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_ace46e91fac36ee337218f2ed4a9c6bd3}{nSamples}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00160}00160\ \ \ \ \ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a820c9eedf560eed9005d98d105d78858}{jitterCount}}=0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00161}00161\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00162}00162\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_ad42cce783e2813461b8ea3a1b8063caf}{prevSign}}\ =\ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a0e5efa0754e70939f5f89b432b9fcfdc}{currSign}};}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00163}00163\ \}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00164}00164\ }
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00165}\mbox{\hyperlink{group___c_t_r_l___p_o_w_e_r___i_n_t_ga4ac3717da59ab21bd293a2594c423b25}{00165}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{group___c_t_r_l___p_o_w_e_r___i_n_t_ga4ac3717da59ab21bd293a2594c423b25}{POWER\_RMS\_1ph\_Run}}(\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h}{POWER\_1PH}}\ *v,float32\_t\ vrms,\ float32\_t\ irms,\ float32\_t\ pf\ )}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00166}00166\ \{}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00167}00167\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a9dc240cb4a37d694e84858137e88607c}{vRms}}\ =\ vrms;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00168}00168\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a57d13453c7fdfaddf54559c647461bcb}{iRms}}\ =\ irms;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00169}00169\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_acfe31de512834b88c1c7d494b2afabec}{powerFactor}}\ =\ pf;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00170}00170\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a138a3abcacce684ed91e62f1f60b560e}{vaRms}}\ =\ vrms\ *\ irms;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00171}00171\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a2f510172a81d01d83ff3569e4303fda4}{pRms}}\ =\ vrms\ *\ irms\ *\ pf;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00172}00172\ \ \ \ \ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a66b11ce1610621a8684d82ed5f335108}{varRms}}\ =\ sqrtf(v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a138a3abcacce684ed91e62f1f60b560e}{vaRms}}\ *\ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a138a3abcacce684ed91e62f1f60b560e}{vaRms}}\ -\/\ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a2f510172a81d01d83ff3569e4303fda4}{pRms}}\ *\ v-\/>\mbox{\hyperlink{struct_p_o_w_e_r__1_p_h_a2f510172a81d01d83ff3569e4303fda4}{pRms}});}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00173}00173\ \}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00174}00174\ }
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00175}\mbox{\hyperlink{group___c_t_r_l___p_o_w_e_r___i_n_t_ga3304d5695483a8801e239c2e34542e31}{00175}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{group___c_t_r_l___p_o_w_e_r___i_n_t_ga3304d5695483a8801e239c2e34542e31}{POWER\_3ph\_Init}}(\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h}{POWER\_3PH}}\ *power)}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00176}00176\ \{}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00177}00177\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a936553e9f7063ee7d2ce26be9d03aec0}{Va}}\ =\ 0.0f;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00178}00178\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_ab94aa715a95faa5d2e5dab3e9ab81f63}{Vb}}\ =\ 0.0f;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00179}00179\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a1d36589d7160b3d05ef157726f6220f8}{Vc}}\ =\ 0.0f;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00180}00180\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a764852164f006a68ee8291f266c18298}{Ia}}\ =\ 0.0f;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00181}00181\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_aaabe756f63988208e91877e112aaa2fa}{Ib}}\ =\ 0.0f;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00182}00182\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_adde6ffa242d4ddacd775e8f4a127ff72}{Ic}}\ =\ 0.0f;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00183}00183\ }
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00184}00184\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_aa6e5bdf203239b5ac174c4581589a566}{Varms}}\ =\ 0.0f;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00185}00185\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a81d61fd65ce0e10b6e0e23050ae854da}{Vbrms}}\ =\ 0.0f;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00186}00186\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a4e707463c70dc88e5d4927502f75eed7}{Vcrms}}\ =\ 0.0f;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00187}00187\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a2d1f329d535f3073613dcd83c0ecb928}{Iarms}}\ =\ 0.0f;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00188}00188\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_ad6e84bc7046dec3b61c7ef8f8c085104}{Ibrms}}\ =\ 0.0f;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00189}00189\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_aaae2401141e5b744689c3cfc2973dc06}{Icrms}}\ =\ 0.0f;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00190}00190\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a49dbe1f4e2b7e178634834f4f1a293ae}{P}}\ =\ 0.0f;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00191}00191\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a57a6fadaccf788e17708f490b56ac617}{Q}}\ =\ 0.0f;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00192}00192\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a000eccc97a80cf21ae0b3593c25accc0}{S}}\ =\ 0.0f;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00193}00193\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a300b761243592a23d541ac395dd78495}{PF}}\ =\ 0.0f;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00194}00194\ }
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00195}00195\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_ad0047a77d96e1611ccd3c7751d3db9a0}{isr\_freq}}\ =\ 0.0f;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00196}00196\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a4650684ea0ef84858c3dc4acc4e8277e}{grid\_freq}}\ =\ 0.0f;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00197}00197\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_aaa770e26f785bb47a5aa885a398820b1}{nsample}}\ =\ 0.0f;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00198}00198\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_afd12161063c2f67da0381e2f4e21b5eb}{nsample\_inv}}\ =\ 0.0f;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00199}00199\ }
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00200}00200\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a4f0ed7935152bffeae34d41fa40b017e}{va\_sum}}\ =\ 0.0f;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00201}00201\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a11fe48ee32088fc44d9adcc32ca8c6c8}{vb\_sum}}\ =\ 0.0f;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00202}00202\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a1a34236e1d70d547fd2100cad84c4a46}{vc\_sum}}\ =\ 0.0f;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00203}00203\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a2f4ad54b70130f0524213ba5dd1492be}{ia\_sum}}\ =\ 0.0f;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00204}00204\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a8fda6d9744882f06b7ed6dd7e602476f}{ib\_sum}}\ =\ 0.0f;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00205}00205\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a2ab44a4d79ee437573a9a87d09f55abd}{ic\_sum}}\ =\ 0.0f;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00206}00206\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a785361f788d4e99cef9972be83afdddd}{sample\_num}}\ =\ 0.0f;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00207}00207\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a04a921301d0405500110a83c3fd7697c}{p\_sum}}\ =\ 0.0f;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00208}00208\ \}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00209}00209\ }
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00210}\mbox{\hyperlink{group___c_t_r_l___p_o_w_e_r___i_n_t_ga818838e6a58d17faec324699e1c13621}{00210}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{group___c_t_r_l___p_o_w_e_r___i_n_t_ga818838e6a58d17faec324699e1c13621}{POWER\_3ph\_Set}}(\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h}{POWER\_3PH}}\ *power,\ float32\_t\ isr\_freq,\ float32\_t\ grid\_freq)}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00211}00211\ \{}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00212}00212\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a4650684ea0ef84858c3dc4acc4e8277e}{grid\_freq}}\ =\ grid\_freq;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00213}00213\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_ad0047a77d96e1611ccd3c7751d3db9a0}{isr\_freq}}\ =\ isr\_freq;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00214}00214\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_aaa770e26f785bb47a5aa885a398820b1}{nsample}}\ =\ isr\_freq\ /\ grid\_freq\ *\ 0.5f;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00215}00215\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_afd12161063c2f67da0381e2f4e21b5eb}{nsample\_inv}}\ =\ (1.0f)\ /\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_aaa770e26f785bb47a5aa885a398820b1}{nsample}};}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00216}00216\ \}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00217}00217\ }
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00218}\mbox{\hyperlink{group___c_t_r_l___p_o_w_e_r___i_n_t_gaffdcf87faf162e61b13e5cba87637af3}{00218}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{group___c_t_r_l___p_o_w_e_r___i_n_t_gaffdcf87faf162e61b13e5cba87637af3}{POWER\_3ph\_Set\_Voltage}}(\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h}{POWER\_3PH}}\ *power,\ float32\_t\ Va,\ float32\_t\ Vb,\ float32\_t\ Vc)}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00219}00219\ \{}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00220}00220\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a936553e9f7063ee7d2ce26be9d03aec0}{Va}}\ =\ Va;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00221}00221\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_ab94aa715a95faa5d2e5dab3e9ab81f63}{Vb}}\ =\ Vb;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00222}00222\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a1d36589d7160b3d05ef157726f6220f8}{Vc}}\ =\ Vc;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00223}00223\ \}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00224}00224\ }
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00225}\mbox{\hyperlink{group___c_t_r_l___p_o_w_e_r___i_n_t_gaccfdd2ff0df15f7cadb0d3ad1e7f1dad}{00225}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{group___c_t_r_l___p_o_w_e_r___i_n_t_gaccfdd2ff0df15f7cadb0d3ad1e7f1dad}{POWER\_3ph\_Set\_Current}}(\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h}{POWER\_3PH}}\ *power,\ float32\_t\ Ia,\ float32\_t\ Ib,\ float32\_t\ Ic)}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00226}00226\ \{}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00227}00227\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a764852164f006a68ee8291f266c18298}{Ia}}\ =\ Ia;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00228}00228\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_aaabe756f63988208e91877e112aaa2fa}{Ib}}\ =\ Ib;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00229}00229\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_adde6ffa242d4ddacd775e8f4a127ff72}{Ic}}\ =\ Ic;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00230}00230\ \}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00231}00231\ }
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00232}\mbox{\hyperlink{group___c_t_r_l___p_o_w_e_r___i_n_t_ga84f6d0cf4a3cf6875367778fb0cb98b5}{00232}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{group___c_t_r_l___p_o_w_e_r___i_n_t_ga84f6d0cf4a3cf6875367778fb0cb98b5}{POWER\_3ph\_Run}}(\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h}{POWER\_3PH}}\ *power)}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00233}00233\ \{}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00234}00234\ \ \ \ \ \textcolor{comment}{//\ getting\ current\ sample\ number}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00235}00235\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a785361f788d4e99cef9972be83afdddd}{sample\_num}}\ =\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a785361f788d4e99cef9972be83afdddd}{sample\_num}}\ +\ 1;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00236}00236\ }
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00237}00237\ \ \ \ \ \textcolor{comment}{//\ rms\ for\ volate\ and\ current}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00238}00238\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a4f0ed7935152bffeae34d41fa40b017e}{va\_sum}}\ =\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a936553e9f7063ee7d2ce26be9d03aec0}{Va}}\ *\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a936553e9f7063ee7d2ce26be9d03aec0}{Va}}\ +\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a4f0ed7935152bffeae34d41fa40b017e}{va\_sum}};}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00239}00239\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a11fe48ee32088fc44d9adcc32ca8c6c8}{vb\_sum}}\ =\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_ab94aa715a95faa5d2e5dab3e9ab81f63}{Vb}}\ *\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_ab94aa715a95faa5d2e5dab3e9ab81f63}{Vb}}\ +\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a11fe48ee32088fc44d9adcc32ca8c6c8}{vb\_sum}};}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00240}00240\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a1a34236e1d70d547fd2100cad84c4a46}{vc\_sum}}\ =\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a1d36589d7160b3d05ef157726f6220f8}{Vc}}\ *\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a1d36589d7160b3d05ef157726f6220f8}{Vc}}\ +\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a1a34236e1d70d547fd2100cad84c4a46}{vc\_sum}};}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00241}00241\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a2f4ad54b70130f0524213ba5dd1492be}{ia\_sum}}\ =\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a764852164f006a68ee8291f266c18298}{Ia}}\ *\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a764852164f006a68ee8291f266c18298}{Ia}}\ +\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a2f4ad54b70130f0524213ba5dd1492be}{ia\_sum}};}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00242}00242\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a8fda6d9744882f06b7ed6dd7e602476f}{ib\_sum}}\ =\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_aaabe756f63988208e91877e112aaa2fa}{Ib}}\ *\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_aaabe756f63988208e91877e112aaa2fa}{Ib}}\ +\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a8fda6d9744882f06b7ed6dd7e602476f}{ib\_sum}};}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00243}00243\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a2ab44a4d79ee437573a9a87d09f55abd}{ic\_sum}}\ =\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_adde6ffa242d4ddacd775e8f4a127ff72}{Ic}}\ *\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_adde6ffa242d4ddacd775e8f4a127ff72}{Ic}}\ +\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a2ab44a4d79ee437573a9a87d09f55abd}{ic\_sum}};}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00244}00244\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a04a921301d0405500110a83c3fd7697c}{p\_sum}}\ =\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a936553e9f7063ee7d2ce26be9d03aec0}{Va}}\ *\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a764852164f006a68ee8291f266c18298}{Ia}}\ +\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_ab94aa715a95faa5d2e5dab3e9ab81f63}{Vb}}\ *\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_aaabe756f63988208e91877e112aaa2fa}{Ib}}\ +\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a1d36589d7160b3d05ef157726f6220f8}{Vc}}\ *\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_adde6ffa242d4ddacd775e8f4a127ff72}{Ic}}\ +\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a04a921301d0405500110a83c3fd7697c}{p\_sum}};}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00245}00245\ }
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00246}00246\ \ \ \ \ \textcolor{comment}{//\ when\ sample\ ==\ nsample,\ indecating\ get\ a\ sine\ period}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00247}00247\ \ \ \ \ \textcolor{comment}{//\ update\ output}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00248}00248\ \ \ \ \ \textcolor{keywordflow}{if}\ (power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_aaa770e26f785bb47a5aa885a398820b1}{nsample}}\ ==\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a785361f788d4e99cef9972be83afdddd}{sample\_num}})}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00249}00249\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00250}00250\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ voltage\ rms}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00251}00251\ \ \ \ \ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_aa6e5bdf203239b5ac174c4581589a566}{Varms}}\ =\ sqrtf(power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a4f0ed7935152bffeae34d41fa40b017e}{va\_sum}}\ *\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_afd12161063c2f67da0381e2f4e21b5eb}{nsample\_inv}});}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00252}00252\ \ \ \ \ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a81d61fd65ce0e10b6e0e23050ae854da}{Vbrms}}\ =\ sqrtf(power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a11fe48ee32088fc44d9adcc32ca8c6c8}{vb\_sum}}\ *\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_afd12161063c2f67da0381e2f4e21b5eb}{nsample\_inv}});}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00253}00253\ \ \ \ \ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a4e707463c70dc88e5d4927502f75eed7}{Vcrms}}\ =\ sqrtf(power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a1a34236e1d70d547fd2100cad84c4a46}{vc\_sum}}\ *\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_afd12161063c2f67da0381e2f4e21b5eb}{nsample\_inv}});}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00254}00254\ }
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00255}00255\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ current\ rms}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00256}00256\ \ \ \ \ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a2d1f329d535f3073613dcd83c0ecb928}{Iarms}}\ =\ sqrtf(power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a2f4ad54b70130f0524213ba5dd1492be}{ia\_sum}}\ *\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_afd12161063c2f67da0381e2f4e21b5eb}{nsample\_inv}});}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00257}00257\ \ \ \ \ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_ad6e84bc7046dec3b61c7ef8f8c085104}{Ibrms}}\ =\ sqrtf(power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a8fda6d9744882f06b7ed6dd7e602476f}{ib\_sum}}\ *\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_afd12161063c2f67da0381e2f4e21b5eb}{nsample\_inv}});}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00258}00258\ \ \ \ \ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_aaae2401141e5b744689c3cfc2973dc06}{Icrms}}\ =\ sqrtf(power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a2ab44a4d79ee437573a9a87d09f55abd}{ic\_sum}}\ *\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_afd12161063c2f67da0381e2f4e21b5eb}{nsample\_inv}});}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00259}00259\ }
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00260}00260\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ power}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00261}00261\ \ \ \ \ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a49dbe1f4e2b7e178634834f4f1a293ae}{P}}\ =\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_afd12161063c2f67da0381e2f4e21b5eb}{nsample\_inv}}\ *\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a04a921301d0405500110a83c3fd7697c}{p\_sum}};}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00262}00262\ \ \ \ \ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a000eccc97a80cf21ae0b3593c25accc0}{S}}\ =\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_aa6e5bdf203239b5ac174c4581589a566}{Varms}}\ *\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a2d1f329d535f3073613dcd83c0ecb928}{Iarms}}\ +\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a81d61fd65ce0e10b6e0e23050ae854da}{Vbrms}}\ *\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_ad6e84bc7046dec3b61c7ef8f8c085104}{Ibrms}}\ +\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a4e707463c70dc88e5d4927502f75eed7}{Vcrms}}\ *\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_aaae2401141e5b744689c3cfc2973dc06}{Icrms}};}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00263}00263\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00264}00264\ \ \ \ \ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a300b761243592a23d541ac395dd78495}{PF}}\ =\ (power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a000eccc97a80cf21ae0b3593c25accc0}{S}}\ >\ 1e-\/6f)\ ?\ (power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a49dbe1f4e2b7e178634834f4f1a293ae}{P}}\ /\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a000eccc97a80cf21ae0b3593c25accc0}{S}})\ :\ 0.0f;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00265}00265\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00266}00266\ \ \ \ \ \ \ \ \ float32\_t\ temp\ =\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a000eccc97a80cf21ae0b3593c25accc0}{S}}\ *\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a000eccc97a80cf21ae0b3593c25accc0}{S}}\ -\/\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a49dbe1f4e2b7e178634834f4f1a293ae}{P}}\ *\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a49dbe1f4e2b7e178634834f4f1a293ae}{P}};}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00267}00267\ \ \ \ \ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a57a6fadaccf788e17708f490b56ac617}{Q}}\ =\ (temp\ >\ 0.0f)\ ?\ sqrtf(temp)\ :\ 0.0f;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00268}00268\ }
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00269}00269\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ reset\ integrator}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00270}00270\ \ \ \ \ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a4f0ed7935152bffeae34d41fa40b017e}{va\_sum}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00271}00271\ \ \ \ \ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a11fe48ee32088fc44d9adcc32ca8c6c8}{vb\_sum}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00272}00272\ \ \ \ \ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a1a34236e1d70d547fd2100cad84c4a46}{vc\_sum}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00273}00273\ \ \ \ \ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a2f4ad54b70130f0524213ba5dd1492be}{ia\_sum}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00274}00274\ \ \ \ \ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a8fda6d9744882f06b7ed6dd7e602476f}{ib\_sum}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00275}00275\ \ \ \ \ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a2ab44a4d79ee437573a9a87d09f55abd}{ic\_sum}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00276}00276\ \ \ \ \ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a04a921301d0405500110a83c3fd7697c}{p\_sum}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00277}00277\ }
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00278}00278\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ reset\ sample\ counter}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00279}00279\ \ \ \ \ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a785361f788d4e99cef9972be83afdddd}{sample\_num}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00280}00280\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00281}00281\ \}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00282}00282\ }
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00283}\mbox{\hyperlink{group___c_t_r_l___p_o_w_e_r___i_n_t_gafbc11f452b966f1b52fd88269be05996}{00283}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{group___c_t_r_l___p_o_w_e_r___i_n_t_gafbc11f452b966f1b52fd88269be05996}{POWER\_3ph\_RMS\_Run}}(\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h}{POWER\_3PH}}\ *power,\ float32\_t\ Varms,\ float32\_t\ Vbrms,\ float32\_t\ Vcrms,\ float32\_t\ Iarms,\ float32\_t\ Ibrms,\ float32\_t\ Icrms,\ float32\_t\ PF)}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00284}00284\ \{}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00285}00285\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_aa6e5bdf203239b5ac174c4581589a566}{Varms}}\ =\ Varms;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00286}00286\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a81d61fd65ce0e10b6e0e23050ae854da}{Vbrms}}\ =\ Vbrms;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00287}00287\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a4e707463c70dc88e5d4927502f75eed7}{Vcrms}}\ =\ Vcrms;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00288}00288\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a2d1f329d535f3073613dcd83c0ecb928}{Iarms}}\ =\ Iarms;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00289}00289\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_ad6e84bc7046dec3b61c7ef8f8c085104}{Ibrms}}\ =\ Ibrms;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00290}00290\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_aaae2401141e5b744689c3cfc2973dc06}{Icrms}}\ =\ Icrms;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00291}00291\ }
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00292}00292\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a000eccc97a80cf21ae0b3593c25accc0}{S}}\ =\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_aa6e5bdf203239b5ac174c4581589a566}{Varms}}\ *\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a2d1f329d535f3073613dcd83c0ecb928}{Iarms}}\ +\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a81d61fd65ce0e10b6e0e23050ae854da}{Vbrms}}\ *\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_ad6e84bc7046dec3b61c7ef8f8c085104}{Ibrms}}\ +\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a4e707463c70dc88e5d4927502f75eed7}{Vcrms}}\ *\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_aaae2401141e5b744689c3cfc2973dc06}{Icrms}};}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00293}00293\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a49dbe1f4e2b7e178634834f4f1a293ae}{P}}\ =\ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a300b761243592a23d541ac395dd78495}{PF}}\ *\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a000eccc97a80cf21ae0b3593c25accc0}{S}};}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00294}00294\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a57a6fadaccf788e17708f490b56ac617}{Q}}\ =\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a000eccc97a80cf21ae0b3593c25accc0}{S}}\ *\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a000eccc97a80cf21ae0b3593c25accc0}{S}}\ -\/\ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a49dbe1f4e2b7e178634834f4f1a293ae}{P}}\ *power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a49dbe1f4e2b7e178634834f4f1a293ae}{P}};}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00295}00295\ \ \ \ \ \textcolor{keywordflow}{if}\ (power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a57a6fadaccf788e17708f490b56ac617}{Q}}\ <\ 0)}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00296}00296\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00297}00297\ \ \ \ \ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a57a6fadaccf788e17708f490b56ac617}{Q}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00298}00298\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00299}00299\ \ \ \ \ power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a57a6fadaccf788e17708f490b56ac617}{Q}}\ =\ sqrtf(power-\/>\mbox{\hyperlink{struct_p_o_w_e_r__3_p_h_a57a6fadaccf788e17708f490b56ac617}{Q}});}
\DoxyCodeLine{\Hypertarget{power__int_8c_source_l00300}00300\ \}}

\end{DoxyCode}

\doxysubsubsubsection{IIR数字滤波器 }
\hypertarget{group___c_t_r_l___f_i_l_t_e_r}{}\label{group___c_t_r_l___f_i_l_t_e_r}\index{IIR数字滤波器@{IIR数字滤波器}}


实现常见数字滤波器类型, 包括一阶和二阶低通/高通/带通/带阻滤波器, 基于\+TI 的 \doxylink{group___c_t_r_l___t_r_a_n_s_f_u_n_gaf8832c3b4a1ad9070601b091b430b0e8}{DCL\+\_\+\+DF22} 结构体实现  


IIR数字滤波器 的协作图\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=259pt]{group___c_t_r_l___f_i_l_t_e_r}
\end{center}
\end{figure}
\doxysubsubsubsubsubsection*{结构体}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_f_i_l_t_e_r}{FILTER}}
\begin{DoxyCompactList}\small\item\em 定义通用数字滤波器结构体 \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsubsubsubsection*{类型定义}
\begin{DoxyCompactItemize}
\item 
typedef enum \mbox{\hyperlink{group___c_t_r_l___f_i_l_t_e_r_ga7ef0ab496f57e183b484e62e2053c94f}{Filter\+Type}} \mbox{\hyperlink{group___c_t_r_l___f_i_l_t_e_r_gac11d127292fe897a054b665cf5985e83}{Filter\+Type}}
\begin{DoxyCompactList}\small\item\em 定义滤波器类型 \doxylink{group___c_t_r_l___f_i_l_t_e_r_ga7ef0ab496f57e183b484e62e2053c94f}{Filter\+Type} \end{DoxyCompactList}\item 
typedef struct FILTER \mbox{\hyperlink{group___c_t_r_l___f_i_l_t_e_r_gac86c6b6fa8a4126f68837d61aa7d9633}{FILTER}}
\begin{DoxyCompactList}\small\item\em 定义通用数字滤波器结构体 \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsubsubsubsection*{枚举}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{group___c_t_r_l___f_i_l_t_e_r_ga7ef0ab496f57e183b484e62e2053c94f}{Filter\+Type}} \{ \newline
\mbox{\hyperlink{group___c_t_r_l___f_i_l_t_e_r_gga7ef0ab496f57e183b484e62e2053c94faa03dcbd13e5149679eccdc38ac2f5aee}{FIL\+\_\+\+NULL}} = 0U
, \mbox{\hyperlink{group___c_t_r_l___f_i_l_t_e_r_gga7ef0ab496f57e183b484e62e2053c94fa0cd4611d2ee5837a0c5221cdb19dd23b}{LPF\+\_\+1\+\_\+\+ORDER}} = 1U
, \mbox{\hyperlink{group___c_t_r_l___f_i_l_t_e_r_gga7ef0ab496f57e183b484e62e2053c94faa1f8d0530c40e12082c09692fdb9e77c}{HPF\+\_\+1\+\_\+\+ORDER}} = 2U
, \mbox{\hyperlink{group___c_t_r_l___f_i_l_t_e_r_gga7ef0ab496f57e183b484e62e2053c94fab748983473e8a9419d1c869c06df0c6d}{LPF\+\_\+2\+\_\+\+ORDER}} = 3U
, \newline
\mbox{\hyperlink{group___c_t_r_l___f_i_l_t_e_r_gga7ef0ab496f57e183b484e62e2053c94fafb52d3ebd5405cad8bb301af9437dccb}{HPF\+\_\+2\+\_\+\+ORDER}} = 4U
, \mbox{\hyperlink{group___c_t_r_l___f_i_l_t_e_r_gga7ef0ab496f57e183b484e62e2053c94fa84225c08afc69fdb71afd4738771fb05}{BPF\+\_\+2\+\_\+\+ORDER}} = 5U
, \mbox{\hyperlink{group___c_t_r_l___f_i_l_t_e_r_gga7ef0ab496f57e183b484e62e2053c94fa1f0828a59462f2429fa526c12d9d4189}{BSF\+\_\+2\+\_\+\+ORDER}} = 6U
 \}
\begin{DoxyCompactList}\small\item\em 定义滤波器类型 \doxylink{group___c_t_r_l___f_i_l_t_e_r_ga7ef0ab496f57e183b484e62e2053c94f}{Filter\+Type} \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsubsubsubsection*{函数}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{group___c_t_r_l___f_i_l_t_e_r_ga6bf8811531a98a51e7a794c2a27c0b04}{Filter\+\_\+\+Init}} (\mbox{\hyperlink{struct_f_i_l_t_e_r}{FILTER}} \texorpdfstring{$\ast$}{*}fil)
\begin{DoxyCompactList}\small\item\em 初始化一阶结构体 \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___c_t_r_l___f_i_l_t_e_r_gaeb072f0b39f2c1c227d2f9a14de3f56b}{Filter\+\_\+\+Set}} (\mbox{\hyperlink{struct_f_i_l_t_e_r}{FILTER}} \texorpdfstring{$\ast$}{*}fil, \mbox{\hyperlink{group___c_t_r_l___f_i_l_t_e_r_ga7ef0ab496f57e183b484e62e2053c94f}{Filter\+Type}} type, float32\+\_\+t wc, float32\+\_\+t damp, float32\+\_\+t isr\+\_\+freq)
\begin{DoxyCompactList}\small\item\em 配置数字滤波器, Tustin离散化实现 \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{group___c_t_r_l___f_i_l_t_e_r_gacc49dc6e7958ff297d763394dd0432cd}{Filter\+\_\+\+Run}} (\mbox{\hyperlink{struct_f_i_l_t_e_r}{FILTER}} \texorpdfstring{$\ast$}{*}fil, float32\+\_\+t \mbox{\hyperlink{group___d_s_p___r_f_f_t___f32_ga5a0f4b49baab36db0c5e1922cdbc6c71}{input}})
\begin{DoxyCompactList}\small\item\em 执行数字滤波器, 一阶和二阶滤波器共用\+DF22结构体 \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsubsubsubsection{详细描述}
实现常见数字滤波器类型, 包括一阶和二阶低通/高通/带通/带阻滤波器, 基于\+TI 的 \doxylink{group___c_t_r_l___t_r_a_n_s_f_u_n_gaf8832c3b4a1ad9070601b091b430b0e8}{DCL\+\_\+\+DF22} 结构体实现 



\label{doc-typedef-members}
\Hypertarget{group___c_t_r_l___f_i_l_t_e_r_doc-typedef-members}
\doxysubsubsubsubsection{类型定义说明}
\Hypertarget{group___c_t_r_l___f_i_l_t_e_r_gac86c6b6fa8a4126f68837d61aa7d9633}\index{IIR数字滤波器@{IIR数字滤波器}!FILTER@{FILTER}}
\index{FILTER@{FILTER}!IIR数字滤波器@{IIR数字滤波器}}
\doxysubsubsubsubsubsection{\texorpdfstring{FILTER}{FILTER}}
{\footnotesize\ttfamily \label{group___c_t_r_l___f_i_l_t_e_r_gac86c6b6fa8a4126f68837d61aa7d9633} 
typedef struct FILTER FILTER}



定义通用数字滤波器结构体 

\begin{DoxyNote}{注解}
在调用 Filter\+\_\+\+Run 之前, 必须先调用 Filter\+\_\+\+Init 和 Filter\+\_\+\+Set 进行初始化和配置 

一阶和二阶滤波器均使用 \doxylink{group___c_t_r_l___t_r_a_n_s_f_u_n_gaf8832c3b4a1ad9070601b091b430b0e8}{DCL\+\_\+\+DF22} 结构 
\end{DoxyNote}
\Hypertarget{group___c_t_r_l___f_i_l_t_e_r_gac11d127292fe897a054b665cf5985e83}\index{IIR数字滤波器@{IIR数字滤波器}!FilterType@{FilterType}}
\index{FilterType@{FilterType}!IIR数字滤波器@{IIR数字滤波器}}
\doxysubsubsubsubsubsection{\texorpdfstring{FilterType}{FilterType}}
{\footnotesize\ttfamily \label{group___c_t_r_l___f_i_l_t_e_r_gac11d127292fe897a054b665cf5985e83} 
typedef enum \mbox{\hyperlink{group___c_t_r_l___f_i_l_t_e_r_ga7ef0ab496f57e183b484e62e2053c94f}{Filter\+Type}} \mbox{\hyperlink{group___c_t_r_l___f_i_l_t_e_r_ga7ef0ab496f57e183b484e62e2053c94f}{Filter\+Type}}}



定义滤波器类型 \doxylink{group___c_t_r_l___f_i_l_t_e_r_ga7ef0ab496f57e183b484e62e2053c94f}{Filter\+Type} 



\label{doc-enum-members}
\Hypertarget{group___c_t_r_l___f_i_l_t_e_r_doc-enum-members}
\doxysubsubsubsubsection{枚举类型说明}
\Hypertarget{group___c_t_r_l___f_i_l_t_e_r_ga7ef0ab496f57e183b484e62e2053c94f}\index{IIR数字滤波器@{IIR数字滤波器}!FilterType@{FilterType}}
\index{FilterType@{FilterType}!IIR数字滤波器@{IIR数字滤波器}}
\doxysubsubsubsubsubsection{\texorpdfstring{FilterType}{FilterType}}
{\footnotesize\ttfamily \label{group___c_t_r_l___f_i_l_t_e_r_ga7ef0ab496f57e183b484e62e2053c94f} 
enum \mbox{\hyperlink{group___c_t_r_l___f_i_l_t_e_r_ga7ef0ab496f57e183b484e62e2053c94f}{Filter\+Type}}}



定义滤波器类型 \doxylink{group___c_t_r_l___f_i_l_t_e_r_ga7ef0ab496f57e183b484e62e2053c94f}{Filter\+Type} 

\begin{DoxyEnumFields}[2]{枚举值}
\raisebox{\heightof{T}}[0pt][0pt]{\index{FIL\_NULL@{FIL\_NULL}!IIR数字滤波器@{IIR数字滤波器}}\index{IIR数字滤波器@{IIR数字滤波器}!FIL\_NULL@{FIL\_NULL}}}\Hypertarget{group___c_t_r_l___f_i_l_t_e_r_gga7ef0ab496f57e183b484e62e2053c94faa03dcbd13e5149679eccdc38ac2f5aee}\label{group___c_t_r_l___f_i_l_t_e_r_gga7ef0ab496f57e183b484e62e2053c94faa03dcbd13e5149679eccdc38ac2f5aee} 
FIL\+\_\+\+NULL&初始化默认值, 未配置时为 NULL 类型 \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{LPF\_1\_ORDER@{LPF\_1\_ORDER}!IIR数字滤波器@{IIR数字滤波器}}\index{IIR数字滤波器@{IIR数字滤波器}!LPF\_1\_ORDER@{LPF\_1\_ORDER}}}\Hypertarget{group___c_t_r_l___f_i_l_t_e_r_gga7ef0ab496f57e183b484e62e2053c94fa0cd4611d2ee5837a0c5221cdb19dd23b}\label{group___c_t_r_l___f_i_l_t_e_r_gga7ef0ab496f57e183b484e62e2053c94fa0cd4611d2ee5837a0c5221cdb19dd23b} 
LPF\+\_\+1\+\_\+\+ORDER&一阶低通滤波器 \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{HPF\_1\_ORDER@{HPF\_1\_ORDER}!IIR数字滤波器@{IIR数字滤波器}}\index{IIR数字滤波器@{IIR数字滤波器}!HPF\_1\_ORDER@{HPF\_1\_ORDER}}}\Hypertarget{group___c_t_r_l___f_i_l_t_e_r_gga7ef0ab496f57e183b484e62e2053c94faa1f8d0530c40e12082c09692fdb9e77c}\label{group___c_t_r_l___f_i_l_t_e_r_gga7ef0ab496f57e183b484e62e2053c94faa1f8d0530c40e12082c09692fdb9e77c} 
HPF\+\_\+1\+\_\+\+ORDER&一阶高通滤波器 \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{LPF\_2\_ORDER@{LPF\_2\_ORDER}!IIR数字滤波器@{IIR数字滤波器}}\index{IIR数字滤波器@{IIR数字滤波器}!LPF\_2\_ORDER@{LPF\_2\_ORDER}}}\Hypertarget{group___c_t_r_l___f_i_l_t_e_r_gga7ef0ab496f57e183b484e62e2053c94fab748983473e8a9419d1c869c06df0c6d}\label{group___c_t_r_l___f_i_l_t_e_r_gga7ef0ab496f57e183b484e62e2053c94fab748983473e8a9419d1c869c06df0c6d} 
LPF\+\_\+2\+\_\+\+ORDER&二阶低通滤波器 \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{HPF\_2\_ORDER@{HPF\_2\_ORDER}!IIR数字滤波器@{IIR数字滤波器}}\index{IIR数字滤波器@{IIR数字滤波器}!HPF\_2\_ORDER@{HPF\_2\_ORDER}}}\Hypertarget{group___c_t_r_l___f_i_l_t_e_r_gga7ef0ab496f57e183b484e62e2053c94fafb52d3ebd5405cad8bb301af9437dccb}\label{group___c_t_r_l___f_i_l_t_e_r_gga7ef0ab496f57e183b484e62e2053c94fafb52d3ebd5405cad8bb301af9437dccb} 
HPF\+\_\+2\+\_\+\+ORDER&二阶高通滤波器 \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{BPF\_2\_ORDER@{BPF\_2\_ORDER}!IIR数字滤波器@{IIR数字滤波器}}\index{IIR数字滤波器@{IIR数字滤波器}!BPF\_2\_ORDER@{BPF\_2\_ORDER}}}\Hypertarget{group___c_t_r_l___f_i_l_t_e_r_gga7ef0ab496f57e183b484e62e2053c94fa84225c08afc69fdb71afd4738771fb05}\label{group___c_t_r_l___f_i_l_t_e_r_gga7ef0ab496f57e183b484e62e2053c94fa84225c08afc69fdb71afd4738771fb05} 
BPF\+\_\+2\+\_\+\+ORDER&二阶带通滤波器 \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{BSF\_2\_ORDER@{BSF\_2\_ORDER}!IIR数字滤波器@{IIR数字滤波器}}\index{IIR数字滤波器@{IIR数字滤波器}!BSF\_2\_ORDER@{BSF\_2\_ORDER}}}\Hypertarget{group___c_t_r_l___f_i_l_t_e_r_gga7ef0ab496f57e183b484e62e2053c94fa1f0828a59462f2429fa526c12d9d4189}\label{group___c_t_r_l___f_i_l_t_e_r_gga7ef0ab496f57e183b484e62e2053c94fa1f0828a59462f2429fa526c12d9d4189} 
BSF\+\_\+2\+\_\+\+ORDER&二阶带阻滤波器 \\
\hline

\end{DoxyEnumFields}


在文件 \mbox{\hyperlink{filter_8h_source}{filter.\+h}} 第 \mbox{\hyperlink{filter_8h_source_l00025}{25}} 行定义.



\label{doc-func-members}
\Hypertarget{group___c_t_r_l___f_i_l_t_e_r_doc-func-members}
\doxysubsubsubsubsection{函数说明}
\Hypertarget{group___c_t_r_l___f_i_l_t_e_r_ga6bf8811531a98a51e7a794c2a27c0b04}\index{IIR数字滤波器@{IIR数字滤波器}!Filter\_Init@{Filter\_Init}}
\index{Filter\_Init@{Filter\_Init}!IIR数字滤波器@{IIR数字滤波器}}
\doxysubsubsubsubsubsection{\texorpdfstring{Filter\_Init()}{Filter\_Init()}}
{\footnotesize\ttfamily \label{group___c_t_r_l___f_i_l_t_e_r_ga6bf8811531a98a51e7a794c2a27c0b04} 
void Filter\+\_\+\+Init (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_f_i_l_t_e_r}{FILTER}} \texorpdfstring{$\ast$}{*}}]{fil}{}\end{DoxyParamCaption})}



初始化一阶结构体 

\begin{DoxyNote}{注解}
滤波器类型初始化为\+FIL\+\_\+\+NULL, 需要调用 Filter\+\_\+\+Set 进行配置 
\end{DoxyNote}

\begin{DoxyParams}[1]{参数}
\mbox{\texttt{in}}  & {\em fil} & 结构体指针 \\
\hline
\end{DoxyParams}


在文件 \mbox{\hyperlink{filter_8c_source}{filter.\+c}} 第 \mbox{\hyperlink{filter_8c_source_l00014}{14}} 行定义.

函数调用图\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=255pt]{group___c_t_r_l___f_i_l_t_e_r_ga6bf8811531a98a51e7a794c2a27c0b04_cgraph}
\end{center}
\end{figure}
\Hypertarget{group___c_t_r_l___f_i_l_t_e_r_gacc49dc6e7958ff297d763394dd0432cd}\index{IIR数字滤波器@{IIR数字滤波器}!Filter\_Run@{Filter\_Run}}
\index{Filter\_Run@{Filter\_Run}!IIR数字滤波器@{IIR数字滤波器}}
\doxysubsubsubsubsubsection{\texorpdfstring{Filter\_Run()}{Filter\_Run()}}
{\footnotesize\ttfamily \label{group___c_t_r_l___f_i_l_t_e_r_gacc49dc6e7958ff297d763394dd0432cd} 
void Filter\+\_\+\+Run (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_f_i_l_t_e_r}{FILTER}} \texorpdfstring{$\ast$}{*}}]{fil}{, }\item[{float32\+\_\+t}]{input}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



执行数字滤波器, 一阶和二阶滤波器共用\+DF22结构体 


\begin{DoxyParams}[1]{参数}
\mbox{\texttt{in}}  & {\em fil} & 结构体指针 \\
\hline
\mbox{\texttt{in}}  & {\em input} & 输入数据 \\
\hline
\end{DoxyParams}


在文件 \mbox{\hyperlink{filter_8h_source}{filter.\+h}} 第 \mbox{\hyperlink{filter_8h_source_l00075}{75}} 行定义.

函数调用图\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=259pt]{group___c_t_r_l___f_i_l_t_e_r_gacc49dc6e7958ff297d763394dd0432cd_cgraph}
\end{center}
\end{figure}
\Hypertarget{group___c_t_r_l___f_i_l_t_e_r_gaeb072f0b39f2c1c227d2f9a14de3f56b}\index{IIR数字滤波器@{IIR数字滤波器}!Filter\_Set@{Filter\_Set}}
\index{Filter\_Set@{Filter\_Set}!IIR数字滤波器@{IIR数字滤波器}}
\doxysubsubsubsubsubsection{\texorpdfstring{Filter\_Set()}{Filter\_Set()}}
{\footnotesize\ttfamily \label{group___c_t_r_l___f_i_l_t_e_r_gaeb072f0b39f2c1c227d2f9a14de3f56b} 
void Filter\+\_\+\+Set (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_f_i_l_t_e_r}{FILTER}} \texorpdfstring{$\ast$}{*}}]{fil}{, }\item[{\mbox{\hyperlink{group___c_t_r_l___f_i_l_t_e_r_ga7ef0ab496f57e183b484e62e2053c94f}{Filter\+Type}}}]{type}{, }\item[{float32\+\_\+t}]{wc}{, }\item[{float32\+\_\+t}]{damp}{, }\item[{float32\+\_\+t}]{isr\+\_\+freq}{}\end{DoxyParamCaption})}



配置数字滤波器, Tustin离散化实现 


\begin{DoxyParams}[1]{参数}
\mbox{\texttt{in}}  & {\em fil} & 结构体指针 \\
\hline
\mbox{\texttt{in}}  & {\em type} & 滤波器类型 \\
\hline
\mbox{\texttt{in}}  & {\em wc} & 中心频率 \\
\hline
\mbox{\texttt{in}}  & {\em damp} & 阻尼比 \\
\hline
\mbox{\texttt{in}}  & {\em isr\+\_\+freq} & interrupt frequent\\
\hline
\end{DoxyParams}
\begin{DoxyNote}{注解}
带通/带阻滤波器, 推荐 2 \texorpdfstring{$\ast$}{*} wc \texorpdfstring{$\ast$}{*} damp = 50 
\end{DoxyNote}
\begin{DoxyWarning}{警告}
在\+Type为 FIL\+\_\+\+NULL 时, 直接输出输入值 
\end{DoxyWarning}


在文件 \mbox{\hyperlink{filter_8c_source}{filter.\+c}} 第 \mbox{\hyperlink{filter_8c_source_l00020}{20}} 行定义.

